import{S as R,i as Y,s as x,O as T,a3 as $,e as y,c as v,a as U,d as w,b as p,g as j,Z as ee,ab as te,X as ne,ac as B,w as le,k as V,x as re,m as S,L as k,y as se,M,a4 as ae,q as D,n as ue,o as E,p as ie,B as oe,a0 as G,Q as ce,F as fe,v as de,t as _e,h as he,W as C,j as me}from"./index-57bb6886.js";import{T as pe}from"./TextInput-a378f4e5.js";import{s as L}from"./index-233a65d3.js";import{a as z}from"./api-f05df814.js";function O(a,t,e){const n=a.slice();return n[23]=t[e],n}function W(a){let t,e=[],n=new Map,u,f,d=a[2];const m=r=>r[23].id;for(let r=0;r<d.length;r+=1){let i=O(a,d,r),c=m(i);n.set(c,e[r]=F(c,i))}return{c(){t=y("ul");for(let r=0;r<e.length;r+=1)e[r].c();this.h()},l(r){t=v(r,"UL",{role:!0,tabindex:!0,class:!0});var i=U(t);for(let c=0;c<e.length;c+=1)e[c].l(i);i.forEach(w),this.h()},h(){p(t,"role","listbox"),p(t,"tabindex","0"),p(t,"class","absolute z-20 mt-2 max-h-60 w-full origin-top overflow-auto rounded-xl bg-gray-700 py-2 px-2 text-white caret-primary-lighter shadow-xl outline-none ring-primary focus:ring-2")},m(r,i){j(r,t,i);for(let c=0;c<e.length;c+=1)e[c].m(t,null);a[21](t),f=!0},p(r,i){i&2060&&(d=r[2],e=ee(e,i,m,1,r,d,n,t,te,F,null,O))},i(r){f||(ne(()=>{u||(u=B(t,L,{duration:150},!0)),u.run(1)}),f=!0)},o(r){u||(u=B(t,L,{duration:150},!1)),u.run(0),f=!1},d(r){r&&w(t);for(let i=0;i<e.length;i+=1)e[i].d();a[21](null),r&&u&&u.end()}}}function F(a,t){let e,n,u,f,d=t[23].user.username+"",m,r,i,c,s;function o(){return t[19](t[23])}function _(){return t[20](t[23])}return{key:a,first:null,c(){e=y("li"),n=y("img"),f=V(),m=_e(d),r=V(),this.h()},l(h){e=v(h,"LI",{tabindex:!0,class:!0,role:!0});var g=U(e);n=v(g,"IMG",{width:!0,height:!0,src:!0,loading:!0,alt:!0,class:!0}),f=S(g),m=he(g,d),r=S(g),g.forEach(w),this.h()},h(){p(n,"width","32"),p(n,"height","32"),C(n.src,u="https://visage.surgeplay.com/face/32/"+t[23].user.minecraftUUID)||p(n,"src",u),p(n,"loading","lazy"),p(n,"alt",""),p(n,"class","h-8 w-8 rounded"),p(e,"tabindex","-1"),p(e,"class",i="my-1 flex cursor-pointer items-center gap-2 rounded-md px-2 py-2 "+(t[3]===t[23].id?"bg-gray-300":"")),p(e,"role","option"),this.first=e},m(h,g){j(h,e,g),k(e,n),k(e,f),k(e,m),k(e,r),c||(s=[M(e,"click",o),M(e,"mouseenter",_)],c=!0)},p(h,g){t=h,g&4&&!C(n.src,u="https://visage.surgeplay.com/face/32/"+t[23].user.minecraftUUID)&&p(n,"src",u),g&4&&d!==(d=t[23].user.username+"")&&me(m,d),g&12&&i!==(i="my-1 flex cursor-pointer items-center gap-2 rounded-md px-2 py-2 "+(t[3]===t[23].id?"bg-gray-300":""))&&p(e,"class",i)},d(h){h&&w(e),c=!1,G(s)}}}function ge(a){let t,e,n,u,f,d,m,r;function i(o){a[15](o)}let c={label:a[1],invalid:!a[0]};a[4]!==void 0&&(c.value=a[4]),n=new pe({props:c}),T.push(()=>$(n,"value",i)),n.$on("focus",a[16]),n.$on("input",a[17]);let s=a[5]&&a[2].length&&W(a);return{c(){t=y("div"),e=y("div"),le(n.$$.fragment),f=V(),s&&s.c(),this.h()},l(o){t=v(o,"DIV",{class:!0});var _=U(t);e=v(_,"DIV",{class:!0});var h=U(e);re(n.$$.fragment,h),h.forEach(w),f=S(_),s&&s.l(_),_.forEach(w),this.h()},h(){p(e,"class","userInputButton"),p(t,"class","relative")},m(o,_){j(o,t,_),k(t,e),se(n,e,null),a[18](e),k(t,f),s&&s.m(t,null),d=!0,m||(r=[M(window,"click",a[9]),M(e,"keydown",a[10])],m=!0)},p(o,[_]){const h={};_&2&&(h.label=o[1]),_&1&&(h.invalid=!o[0]),!u&&_&16&&(u=!0,h.value=o[4],ae(()=>u=!1)),n.$set(h),o[5]&&o[2].length?s?(s.p(o,_),_&36&&D(s,1)):(s=W(o),s.c(),D(s,1),s.m(t,null)):s&&(ue(),E(s,1,1,()=>{s=null}),ie())},i(o){d||(D(n.$$.fragment,o),D(s),d=!0)},o(o){E(n.$$.fragment,o),E(s),d=!1},d(o){o&&w(t),oe(n),a[18](null),s&&s.d(),m=!1,G(r)}}}function be(a,t,e){let n,u=[],f,d="",m=!1,r,i,c,{value:s=null,label:o="\u0418\u0433\u0440\u043E\u043A\u0438",includeMe:_=!1}=t;const h=ce("account"),g=l=>{l.target.closest("ul")!==i&&l.target.closest(".userInputButton")!==c&&e(5,m=!1)},K=l=>{if(!!["ArrowUp","ArrowDown","Space","Enter"].includes(l.code))switch(l.preventDefault(),l.code){case"ArrowDown":case"ArrowUp":{const b=u.at((u.findIndex(({id:q})=>q===f)+(l.code==="ArrowDown"?1:-1))%u.length);e(3,f=b.id),Array.from(i.children).find(q=>q.innerText===b.user.username).scrollIntoView({block:"nearest"});break}case"Enter":case"Space":f&&I(f);break}},I=l=>{e(3,f=null),e(0,s=l),e(2,u=[u.find(({id:b})=>b===l)]),e(4,d=u[0].user.username),e(5,m=!1)},A=()=>{clearTimeout(r),r=setTimeout(()=>z(!0,!0).url("accounts").query({q:d}).get().json().then(l=>{e(2,u=l.filter(b=>_||b.id!==n.id)),e(3,f=null)}),500)};fe(a,h,l=>e(14,n=l)),de(A);function Q(l){d=l,e(4,d)}const X=()=>e(5,m=!0),Z=()=>{A(),e(5,m=!0)};function H(l){T[l?"unshift":"push"](()=>{c=l,e(7,c)})}const J=l=>I(l.id),N=l=>e(3,f=l.id);function P(l){T[l?"unshift":"push"](()=>{i=l,e(6,i)})}return a.$$set=l=>{"value"in l&&e(0,s=l.value),"label"in l&&e(1,o=l.label),"includeMe"in l&&e(13,_=l.includeMe)},a.$$.update=()=>{a.$$.dirty&24577&&s&&z(!0,!0).url("accounts").query({id:s}).get().json().then(l=>{e(2,u=l.filter(b=>_||b.id!==n.id)),I(s)})},[s,o,u,f,d,m,i,c,h,g,K,I,A,_,n,Q,X,Z,H,J,N,P]}class Ie extends R{constructor(t){super(),Y(this,t,be,ge,x,{value:0,label:1,includeMe:13})}}export{Ie as U};
