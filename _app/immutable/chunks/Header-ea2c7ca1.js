import{S as Ke,i as Oe,s as Be,e as y,k as j,t as F,c as E,a as A,m as q,h as L,d as g,b as o,g as z,L as h,M as N,n as Q,o as K,p as ee,q as U,j as xe,F as Me,O as Te,W as fe,E as Z,w as W,x as X,y as G,B as R,X as De,Y as Ae,Z as Ce,_ as Ne,$ as je,a0 as qe,l as se}from"./index-57bb6886.js";import{p as Se,c as ze,a as He,s as Je,b as We}from"./icons-a10bc4c8.js";import{C as Ue}from"./ColoredIcon-88991530.js";import{I as le}from"./Icon-d4a9ed8c.js";import{s as de}from"./index-233a65d3.js";import{l as Ve}from"./api-f05df814.js";import{a as Xe}from"./auth-aa803006.js";function ke(l,t,e){const r=l.slice();return r[0]=t[e].server,r}function Ge(l){let t,e;return{c(){t=y("img"),this.h()},l(r){t=E(r,"IMG",{class:!0,width:!0,height:!0,src:!0,alt:!0}),this.h()},h(){o(t,"class","h-10 w-10"),o(t,"width","40"),o(t,"height","40"),fe(t.src,e="/img/logo.svg")||o(t,"src",e),o(t,"alt","")},m(r,n){z(r,t,n)},p:Z,i:Z,o:Z,d(r){r&&g(t)}}}function Re(l){let t,e;return t=new Ue({props:{color:l[0].icon,icon:Se}}),{c(){W(t.$$.fragment)},l(r){X(t.$$.fragment,r)},m(r,n){G(t,r,n),e=!0},p(r,n){const s={};n&1&&(s.color=r[0].icon),t.$set(s)},i(r){e||(U(t.$$.fragment,r),e=!0)},o(r){K(t.$$.fragment,r),e=!1},d(r){R(t,r)}}}function Fe(l){let t,e,r;return{c(){t=y("a"),e=F("\u0412\u043E\u0439\u0442\u0438"),this.h()},l(n){t=E(n,"A",{class:!0,href:!0});var s=A(t);e=L(s,"\u0412\u043E\u0439\u0442\u0438"),s.forEach(g),this.h()},h(){o(t,"class","btn bg-primary"),o(t,"href",`https://discord.com/api/oauth2/authorize?client_id=911588079150702652&redirect_uri=${encodeURIComponent("https://spworlds.ru/")}&response_type=code&scope=identify`)},m(n,s){z(n,t,s),h(t,e)},p:Z,i(n){r||De(()=>{r=Ae(t,de,{duration:150}),r.start()})},o:Z,d(n){n&&g(t)}}}function Le(l){let t,e,r,n,s,i,a,S,c=l[1]&&we(l);return{c(){t=y("div"),e=y("button"),r=y("img"),s=j(),c&&c.c(),this.h()},l(u){t=E(u,"DIV",{class:!0});var f=A(t);e=E(f,"BUTTON",{id:!0,class:!0,title:!0,"aria-haspopup":!0});var I=A(e);r=E(I,"IMG",{alt:!0,width:!0,height:!0,class:!0,src:!0}),I.forEach(g),s=q(f),c&&c.l(f),f.forEach(g),this.h()},h(){o(r,"alt","\u041C\u0435\u043D\u044E"),o(r,"width","80"),o(r,"height","80"),o(r,"class","h-10 w-10 cursor-pointer rounded-lg transition-transform hover:scale-105"),fe(r.src,n="https://visage.surgeplay.com/face/80/"+(l[4].user.minecraftUUID||"X-Steve"))||o(r,"src",n),o(e,"id","menuButton"),o(e,"class","focusable rounded"),o(e,"title","\u0410\u043A\u043A\u0430\u0443\u043D\u0442 \u043C\u0435\u043D\u044E"),o(e,"aria-haspopup","true"),o(t,"class","relative")},m(u,f){z(u,t,f),h(t,e),h(e,r),h(t,s),c&&c.m(t,null),i=!0,a||(S=N(e,"click",l[7]),a=!0)},p(u,f){(!i||f&16&&!fe(r.src,n="https://visage.surgeplay.com/face/80/"+(u[4].user.minecraftUUID||"X-Steve")))&&o(r,"src",n),u[1]?c?(c.p(u,f),f&2&&U(c,1)):(c=we(u),c.c(),U(c,1),c.m(t,null)):c&&(Q(),K(c,1,1,()=>{c=null}),ee())},i(u){i||(U(c),i=!0)},o(u){K(c),i=!1},d(u){u&&g(t),c&&c.d(),a=!1,S()}}}function we(l){let t,e,r,n,s,i,a=[],S=new Map,c,u=l[4].user.accounts.some(Ie),f,I,w,v,D,k,_,O,m,T,p,$,B,C,M,H,ne,te,re,P,J,oe,he;s=new le({props:{icon:ze}});let Y=l[4].user.accounts;const _e=d=>d[0].id;for(let d=0;d<Y.length;d+=1){let b=ke(l,Y,d),x=_e(b);S.set(x,a[d]=ye(x,b))}let V=u&&Ee();return v=new le({props:{icon:He}}),T=new le({props:{icon:Je}}),H=new le({props:{icon:We}}),{c(){t=y("nav"),e=y("div"),r=y("div"),n=y("button"),W(s.$$.fragment),i=j();for(let d=0;d<a.length;d+=1)a[d].c();c=j(),V&&V.c(),f=j(),I=y("div"),w=y("a"),W(v.$$.fragment),D=F(`
                \u041C\u043E\u0438 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u044B`),_=j(),O=y("div"),m=y("a"),W(T.$$.fragment),p=F(`
                \u041C\u043E\u0438 \u043F\u043E\u043A\u0443\u043F\u043A\u0438`),B=j(),C=y("div"),M=y("button"),W(H.$$.fragment),ne=F(`
                \u0412\u044B\u0439\u0442\u0438`),this.h()},l(d){t=E(d,"NAV",{tabindex:!0,class:!0});var b=A(t);e=E(b,"DIV",{class:!0});var x=A(e);r=E(x,"DIV",{class:!0});var me=A(r);n=E(me,"BUTTON",{title:!0,class:!0});var pe=A(n);X(s.$$.fragment,pe),pe.forEach(g),me.forEach(g),i=q(x);for(let ue=0;ue<a.length;ue+=1)a[ue].l(x);c=q(x),V&&V.l(x),f=q(x),I=E(x,"DIV",{});var ge=A(I);w=E(ge,"A",{"sveltekit:reload":!0,href:!0,tabindex:!0,class:!0});var ae=A(w);X(v.$$.fragment,ae),D=L(ae,`
                \u041C\u043E\u0438 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u044B`),ae.forEach(g),ge.forEach(g),_=q(x),O=E(x,"DIV",{});var be=A(O);m=E(be,"A",{"sveltekit:reload":!0,href:!0,tabindex:!0,class:!0});var ie=A(m);X(T.$$.fragment,ie),p=L(ie,`
                \u041C\u043E\u0438 \u043F\u043E\u043A\u0443\u043F\u043A\u0438`),ie.forEach(g),be.forEach(g),B=q(x),C=E(x,"DIV",{});var ve=A(C);M=E(ve,"BUTTON",{tabindex:!0,class:!0});var ce=A(M);X(H.$$.fragment,ce),ne=L(ce,`
                \u0412\u044B\u0439\u0442\u0438`),ce.forEach(g),ve.forEach(g),x.forEach(g),b.forEach(g),this.h()},h(){o(n,"title","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"),o(n,"class","m-3 ml-auto block outline-none focus:rounded-lg focus:bg-gray-300 focus:text-white"),o(r,"class","md:hidden"),o(w,"sveltekit:reload",""),o(w,"href","/accounts"),o(w,"tabindex","-1"),o(w,"class",k="flex items-center gap-2 rounded-2xl p-2 text-lg transition-colors "+(l[3]==="accounts"?"bg-gray-300 text-white":"")),o(m,"sveltekit:reload",""),o(m,"href","/purchases"),o(m,"tabindex","-1"),o(m,"class",$="flex items-center gap-2 rounded-2xl p-2 text-lg transition-colors "+(l[3]==="purchases"?"bg-gray-300 text-white":"")),o(M,"tabindex","-1"),o(M,"class",te="flex w-full items-center gap-2 rounded-2xl p-2 text-left text-lg transition-transform "+(l[3]==="logout"?"bg-gray-300 text-white":"")),o(e,"class","fixed top-0 right-0 bottom-0 z-10 flex w-60 flex-col items-stretch justify-start gap-2 bg-gray-500 p-2 shadow-xl md:static md:rounded-3xl"),o(t,"tabindex","0"),o(t,"class","focusable origin-right md:absolute md:right-0 md:top-14 md:z-10 md:origin-top-right md:rounded-3xl")},m(d,b){z(d,t,b),h(t,e),h(e,r),h(r,n),G(s,n,null),h(e,i);for(let x=0;x<a.length;x+=1)a[x].m(e,null);h(e,c),V&&V.m(e,null),h(e,f),h(e,I),h(I,w),G(v,w,null),h(w,D),h(e,_),h(e,O),h(O,m),G(T,m,null),h(m,p),h(e,B),h(e,C),h(C,M),G(H,M,null),h(M,ne),l[13](t),J=!0,oe||(he=[N(n,"click",l[8]),N(w,"mouseenter",l[10]),N(m,"mouseenter",l[11]),N(M,"click",Ve),N(M,"mouseenter",l[12]),N(t,"keydown",l[6])],oe=!0)},p(d,b){b&24&&(Y=d[4].user.accounts,Q(),a=Ce(a,b,_e,1,d,Y,S,e,Ne,ye,c,ke),ee()),b&16&&(u=d[4].user.accounts.some(Ie)),u?V||(V=Ee(),V.c(),V.m(e,f)):V&&(V.d(1),V=null),(!J||b&8&&k!==(k="flex items-center gap-2 rounded-2xl p-2 text-lg transition-colors "+(d[3]==="accounts"?"bg-gray-300 text-white":"")))&&o(w,"class",k),(!J||b&8&&$!==($="flex items-center gap-2 rounded-2xl p-2 text-lg transition-colors "+(d[3]==="purchases"?"bg-gray-300 text-white":"")))&&o(m,"class",$),(!J||b&8&&te!==(te="flex w-full items-center gap-2 rounded-2xl p-2 text-left text-lg transition-transform "+(d[3]==="logout"?"bg-gray-300 text-white":"")))&&o(M,"class",te)},i(d){if(!J){U(s.$$.fragment,d);for(let b=0;b<Y.length;b+=1)U(a[b]);U(v.$$.fragment,d),U(T.$$.fragment,d),U(H.$$.fragment,d),De(()=>{P&&P.end(1),re=Ae(t,de,{duration:150}),re.start()}),J=!0}},o(d){K(s.$$.fragment,d);for(let b=0;b<a.length;b+=1)K(a[b]);K(v.$$.fragment,d),K(T.$$.fragment,d),K(H.$$.fragment,d),re&&re.invalidate(),P=je(t,de,{duration:150}),J=!1},d(d){d&&g(t),R(s);for(let b=0;b<a.length;b+=1)a[b].d();V&&V.d(),R(v),R(T),R(H),l[13](null),d&&P&&P.end(),oe=!1,qe(he)}}}function $e(l){var w;let t,e,r,n,s=((w=l[0])==null?void 0:w.name)+"",i,a,S,c,u,f;r=new Ue({props:{icon:Se,color:l[0].icon}});function I(){return l[9](l[0])}return{c(){t=y("div"),e=y("a"),W(r.$$.fragment),n=j(),i=F(s),this.h()},l(v){t=E(v,"DIV",{});var D=A(t);e=E(D,"A",{"sveltekit:reload":!0,href:!0,tabindex:!0,class:!0});var k=A(e);X(r.$$.fragment,k),n=q(k),i=L(k,s),k.forEach(g),D.forEach(g),this.h()},h(){o(e,"sveltekit:reload",""),o(e,"href",a="/"+l[0].id),o(e,"tabindex","-1"),o(e,"class",S="flex items-center gap-4 rounded-2xl p-2 text-lg text-white transition-colors "+(l[3]===l[0].id?"bg-gray-300 text-white":""))},m(v,D){z(v,t,D),h(t,e),G(r,e,null),h(e,n),h(e,i),c=!0,u||(f=N(e,"mouseenter",I),u=!0)},p(v,D){var _;l=v;const k={};D&16&&(k.color=l[0].icon),r.$set(k),(!c||D&16)&&s!==(s=((_=l[0])==null?void 0:_.name)+"")&&xe(i,s),(!c||D&16&&a!==(a="/"+l[0].id))&&o(e,"href",a),(!c||D&24&&S!==(S="flex items-center gap-4 rounded-2xl p-2 text-lg text-white transition-colors "+(l[3]===l[0].id?"bg-gray-300 text-white":"")))&&o(e,"class",S)},i(v){c||(U(r.$$.fragment,v),c=!0)},o(v){K(r.$$.fragment,v),c=!1},d(v){v&&g(t),R(r),u=!1,f()}}}function ye(l,t){let e,r,n,s=t[0].hasSite&&$e(t);return{key:l,first:null,c(){e=se(),s&&s.c(),r=se(),this.h()},l(i){e=se(),s&&s.l(i),r=se(),this.h()},h(){this.first=e},m(i,a){z(i,e,a),s&&s.m(i,a),z(i,r,a),n=!0},p(i,a){t=i,t[0].hasSite?s?(s.p(t,a),a&16&&U(s,1)):(s=$e(t),s.c(),U(s,1),s.m(r.parentNode,r)):s&&(Q(),K(s,1,1,()=>{s=null}),ee())},i(i){n||(U(s),n=!0)},o(i){K(s),n=!1},d(i){i&&g(e),s&&s.d(i),i&&g(r)}}}function Ee(l){let t;return{c(){t=y("div"),this.h()},l(e){t=E(e,"DIV",{class:!0}),A(t).forEach(g),this.h()},h(){o(t,"class","rounded-full border border-secondary border-opacity-10")},m(e,r){z(e,t,r)},d(e){e&&g(t)}}}function Pe(l){let t,e,r,n,s,i=l[0].name+"",a,S,c,u,f,I,w,v;const D=[Re,Ge],k=[];function _(p,$){return p[0].icon?0:1}r=_(l),n=k[r]=D[r](l);const O=[Le,Fe],m=[];function T(p,$){return p[4]?0:p[4]===null?1:-1}return~(u=T(l))&&(f=m[u]=O[u](l)),{c(){t=y("header"),e=y("a"),n.c(),s=j(),a=F(i),c=j(),f&&f.c(),this.h()},l(p){t=E(p,"HEADER",{class:!0});var $=A(t);e=E($,"A",{href:!0,class:!0});var B=A(e);n.l(B),s=q(B),a=L(B,i),B.forEach(g),c=q($),f&&f.l($),$.forEach(g),this.h()},h(){o(e,"href",S="/"+l[0].id),o(e,"class","focusable flex items-center gap-2 rounded-xl text-2xl font-bold text-white"),o(t,"class","mt-2 mb-6 flex h-10 items-center justify-between")},m(p,$){z(p,t,$),h(t,e),k[r].m(e,null),h(e,s),h(e,a),h(t,c),~u&&m[u].m(t,null),I=!0,w||(v=N(window,"click",l[5]),w=!0)},p(p,[$]){let B=r;r=_(p),r===B?k[r].p(p,$):(Q(),K(k[B],1,1,()=>{k[B]=null}),ee(),n=k[r],n?n.p(p,$):(n=k[r]=D[r](p),n.c()),U(n,1),n.m(e,s)),(!I||$&1)&&i!==(i=p[0].name+"")&&xe(a,i),(!I||$&1&&S!==(S="/"+p[0].id))&&o(e,"href",S);let C=u;u=T(p),u===C?~u&&m[u].p(p,$):(f&&(Q(),K(m[C],1,1,()=>{m[C]=null}),ee()),~u?(f=m[u],f?f.p(p,$):(f=m[u]=O[u](p),f.c()),U(f,1),f.m(t,null)):f=null)},i(p){I||(U(n),U(f),I=!0)},o(p){K(n),K(f),I=!1},d(p){p&&g(t),k[r].d(),~u&&m[u].d(),w=!1,v()}}}const Ie=({server:l})=>l.hasSite;function Ye(l,t,e){let r;Me(l,Xe,_=>e(4,r=_));let{server:n={name:"SPWorlds",id:"",icon:null}}=t,s=!1,i,a=null;const S=_=>{_.target.closest("nav")!==i&&!_.target.closest("#menuButton")&&e(1,s=!1)},c=_=>{if(!!["ArrowUp","ArrowDown","KeyJ","KeyK","Space","Enter"].includes(_.code))switch(_.preventDefault(),_.code){case"ArrowDown":case"ArrowUp":case"KeyJ":case"KeyK":{const O=[...r.user.accounts.filter(({server:m})=>m.hasSite).map(({server:m})=>m.id),"accounts","purchases","logout"];e(3,a=O.at((O.findIndex(m=>m===a)+(["ArrowDown","KeyJ"].includes(_.code)?1:-1))%O.length));break}case"Enter":case"Space":a&&(a==="logout"?Ve():location.href=`/${a}`);break}},u=()=>e(1,s=!s),f=()=>e(1,s=!1),I=_=>e(3,a=_.id),w=()=>e(3,a="accounts"),v=()=>e(3,a="purchases"),D=()=>e(3,a="logout");function k(_){Te[_?"unshift":"push"](()=>{i=_,e(2,i)})}return l.$$set=_=>{"server"in _&&e(0,n=_.server)},l.$$.update=()=>{l.$$.dirty&6&&(s?i==null||i.focus():e(3,a=!1))},[n,s,i,a,r,S,c,u,f,I,w,v,D,k]}class nt extends Ke{constructor(t){super(),Oe(this,t,Ye,Pe,Be,{server:0})}}export{nt as H};
